{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://test-protocols.example.com/schemas/base_protocol.json",
  "title": "Base Protocol Schema",
  "description": "Base schema for all PV testing protocols",
  "type": "object",
  "required": [
    "protocol_id",
    "protocol_name",
    "version",
    "standard",
    "metadata",
    "test_parameters",
    "acceptance_criteria"
  ],
  "properties": {
    "protocol_id": {
      "type": "string",
      "description": "Unique identifier for the protocol",
      "pattern": "^[A-Z]+-[0-9]{3}$"
    },
    "protocol_name": {
      "type": "string",
      "description": "Human-readable name of the protocol"
    },
    "version": {
      "type": "string",
      "description": "Protocol version following semantic versioning",
      "pattern": "^\\d+\\.\\d+\\.\\d+$"
    },
    "standard": {
      "type": "object",
      "description": "Reference standard information",
      "required": ["name", "version"],
      "properties": {
        "name": {
          "type": "string",
          "description": "Standard name (e.g., IEC 61215)"
        },
        "version": {
          "type": "string",
          "description": "Standard version"
        },
        "section": {
          "type": "string",
          "description": "Relevant section or clause"
        }
      }
    },
    "metadata": {
      "type": "object",
      "description": "Protocol metadata",
      "required": ["created_date", "category"],
      "properties": {
        "created_date": {
          "type": "string",
          "format": "date-time"
        },
        "updated_date": {
          "type": "string",
          "format": "date-time"
        },
        "category": {
          "type": "string",
          "enum": [
            "mechanical",
            "electrical",
            "thermal",
            "environmental",
            "optical",
            "combined"
          ]
        },
        "tags": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "description": {
          "type": "string"
        }
      }
    },
    "test_parameters": {
      "type": "object",
      "description": "Test-specific parameters"
    },
    "acceptance_criteria": {
      "type": "object",
      "description": "Pass/fail criteria"
    },
    "data_collection": {
      "type": "object",
      "description": "Data collection requirements"
    },
    "required_equipment": {
      "type": "array",
      "description": "List of required testing equipment",
      "items": {
        "type": "object",
        "required": ["name", "type"],
        "properties": {
          "name": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "specifications": {
            "type": "object"
          },
          "calibration_required": {
            "type": "boolean"
          }
        }
      }
    }
  }
}
