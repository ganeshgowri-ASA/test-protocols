{
  "ui_configuration": {
    "protocol_id": "SOLDER-001",
    "title": "Solder Bond Degradation Testing",
    "layout": "multi_page",
    "theme": {
      "primary_color": "#D32F2F",
      "secondary_color": "#FF9800",
      "background_color": "#FFFFFF",
      "font_family": "Arial, sans-serif"
    },
    "pages": [
      {
        "id": "overview",
        "title": "Overview",
        "icon": "üìä",
        "components": [
          {
            "type": "header",
            "content": "Solder Bond Degradation Testing",
            "level": 1
          },
          {
            "type": "info_box",
            "style": "info",
            "content": "Assessment of solder joint reliability through accelerated thermal cycling and mechanical stress testing"
          },
          {
            "type": "metrics_row",
            "metrics": [
              {
                "label": "Test Status",
                "value": "${test_status}",
                "delta": null
              },
              {
                "label": "Current Cycle",
                "value": "${current_cycle}",
                "delta": "${cycle_progress}"
              },
              {
                "label": "Resistance Increase",
                "value": "${resistance_increase}%",
                "delta": "${resistance_delta}"
              },
              {
                "label": "Power Loss",
                "value": "${power_loss}%",
                "delta": "${power_delta}"
              }
            ]
          },
          {
            "type": "divider"
          },
          {
            "type": "progress_indicator",
            "label": "Test Progress",
            "value": "${cycles_completed}",
            "max": 600,
            "show_percentage": true,
            "color_thresholds": [
              {"min": 500, "color": "green", "label": "Final Stage"},
              {"min": 200, "color": "yellow", "label": "Mid Stage"},
              {"min": 0, "color": "blue", "label": "Initial Stage"}
            ]
          },
          {
            "type": "data_table",
            "title": "Module Information",
            "data_source": "module_info",
            "columns": ["Parameter", "Value", "Unit"]
          }
        ]
      },
      {
        "id": "test_setup",
        "title": "Test Setup",
        "icon": "‚öôÔ∏è",
        "components": [
          {
            "type": "form",
            "id": "sample_info_form",
            "title": "Sample Information",
            "fields": [
              {
                "name": "sample_id",
                "label": "Sample ID",
                "type": "text",
                "required": true,
                "placeholder": "e.g., SOLDER-2025-001"
              },
              {
                "name": "manufacturer",
                "label": "Manufacturer",
                "type": "text",
                "required": true
              },
              {
                "name": "model",
                "label": "Model Number",
                "type": "text",
                "required": true
              },
              {
                "name": "serial_numbers",
                "label": "Serial Numbers (12 modules)",
                "type": "text_area",
                "required": true,
                "help_text": "Enter one serial number per line (6 thermal, 6 mechanical)"
              },
              {
                "name": "manufacturing_date",
                "label": "Manufacturing Date",
                "type": "date",
                "required": true
              },
              {
                "name": "cell_type",
                "label": "Cell Technology",
                "type": "select",
                "required": true,
                "options": [
                  "Mono-Si",
                  "Multi-Si",
                  "PERC",
                  "HJT",
                  "IBC",
                  "TOPCon"
                ]
              }
            ]
          },
          {
            "type": "form",
            "id": "solder_info_form",
            "title": "Solder Joint Information",
            "fields": [
              {
                "name": "solder_type",
                "label": "Solder Type",
                "type": "select",
                "required": true,
                "options": [
                  "Lead-free (SAC305)",
                  "Lead-free (SAC405)",
                  "Lead-free (SnAgCuBi)",
                  "Leaded (SnPb)",
                  "Other"
                ]
              },
              {
                "name": "solder_composition",
                "label": "Detailed Composition",
                "type": "text",
                "required": false,
                "placeholder": "e.g., Sn96.5Ag3.0Cu0.5"
              },
              {
                "name": "flux_type",
                "label": "Flux Type",
                "type": "text",
                "required": false
              },
              {
                "name": "reflow_profile",
                "label": "Reflow Profile",
                "type": "text",
                "required": false,
                "help_text": "Peak temp, time above liquidus"
              },
              {
                "name": "ribbon_thickness",
                "label": "Ribbon Thickness",
                "type": "number",
                "required": false,
                "unit": "mm",
                "step": 0.01
              },
              {
                "name": "ribbon_width",
                "label": "Ribbon Width",
                "type": "number",
                "required": false,
                "unit": "mm",
                "step": 0.1
              }
            ]
          },
          {
            "type": "form",
            "id": "test_parameters_form",
            "title": "Test Parameters",
            "fields": [
              {
                "name": "thermal_cycles_target",
                "label": "Target Thermal Cycles",
                "type": "number",
                "required": true,
                "default": 600,
                "min": 50,
                "max": 1000
              },
              {
                "name": "mechanical_cycles_target",
                "label": "Target Mechanical Cycles",
                "type": "number",
                "required": true,
                "default": 10000,
                "min": 1000,
                "max": 50000
              },
              {
                "name": "checkpoint_intervals",
                "label": "Checkpoint Intervals",
                "type": "text",
                "required": true,
                "default": "50, 100, 200, 400, 600",
                "help_text": "Comma-separated cycle numbers for measurements"
              }
            ]
          }
        ]
      },
      {
        "id": "initial_characterization",
        "title": "Initial Characterization",
        "icon": "üì∏",
        "components": [
          {
            "type": "tabs",
            "tabs": [
              {
                "id": "flash_test",
                "label": "Flash Test (STC)",
                "components": [
                  {
                    "type": "file_uploader",
                    "label": "Upload IV Curve Data",
                    "accept": [".csv", ".xlsx"],
                    "multiple": true
                  },
                  {
                    "type": "data_editor",
                    "id": "initial_flash_measurements",
                    "columns": [
                      {"name": "module_id", "type": "text"},
                      {"name": "pmax", "type": "number", "unit": "W"},
                      {"name": "voc", "type": "number", "unit": "V"},
                      {"name": "isc", "type": "number", "unit": "A"},
                      {"name": "fill_factor", "type": "number"},
                      {"name": "series_resistance", "type": "number", "unit": "Œ©"}
                    ],
                    "num_rows": 12
                  }
                ]
              },
              {
                "id": "resistance_mapping",
                "label": "Resistance Mapping",
                "components": [
                  {
                    "type": "info_box",
                    "style": "warning",
                    "content": "Perform 4-wire Kelvin measurements on all cell interconnects and bus bars"
                  },
                  {
                    "type": "file_uploader",
                    "label": "Upload Resistance Map CSV",
                    "accept": [".csv", ".xlsx"],
                    "help_text": "Format: joint_id, resistance_mohm"
                  },
                  {
                    "type": "data_editor",
                    "id": "baseline_resistance",
                    "columns": [
                      {"name": "joint_id", "type": "text"},
                      {"name": "resistance", "type": "number", "unit": "mŒ©"},
                      {"name": "type", "type": "select", "options": ["cell_interconnect", "busbar"]},
                      {"name": "measurement_1", "type": "number", "unit": "mŒ©"},
                      {"name": "measurement_2", "type": "number", "unit": "mŒ©"},
                      {"name": "measurement_3", "type": "number", "unit": "mŒ©"}
                    ],
                    "num_rows": 50
                  },
                  {
                    "type": "metric_cards",
                    "metrics": [
                      {
                        "label": "Avg Cell Resistance",
                        "value": "${avg_cell_resistance}",
                        "unit": "mŒ©",
                        "threshold": {"max": 5.0, "warning": 4.5}
                      },
                      {
                        "label": "Max Cell Resistance",
                        "value": "${max_cell_resistance}",
                        "unit": "mŒ©",
                        "threshold": {"max": 5.0, "warning": 4.5}
                      },
                      {
                        "label": "Avg Busbar Resistance",
                        "value": "${avg_busbar_resistance}",
                        "unit": "mŒ©",
                        "threshold": {"max": 10.0, "warning": 9.0}
                      }
                    ]
                  }
                ]
              },
              {
                "id": "thermal_imaging",
                "label": "IR Imaging",
                "components": [
                  {
                    "type": "file_uploader",
                    "label": "Upload IR Thermal Images",
                    "accept": [".jpg", ".png", ".tiff"],
                    "multiple": true
                  },
                  {
                    "type": "data_editor",
                    "id": "initial_thermal_data",
                    "columns": [
                      {"name": "module_id", "type": "text"},
                      {"name": "avg_temp", "type": "number", "unit": "¬∞C"},
                      {"name": "max_temp", "type": "number", "unit": "¬∞C"},
                      {"name": "hotspot_count", "type": "number"},
                      {"name": "max_delta_t", "type": "number", "unit": "¬∞C"}
                    ],
                    "num_rows": 12
                  }
                ]
              },
              {
                "id": "visual_inspection",
                "label": "Visual Inspection",
                "components": [
                  {
                    "type": "file_uploader",
                    "label": "Upload Inspection Photos",
                    "accept": [".jpg", ".png"],
                    "multiple": true
                  },
                  {
                    "type": "data_editor",
                    "id": "initial_visual_inspection",
                    "columns": [
                      {"name": "module_id", "type": "text"},
                      {"name": "overall_condition", "type": "select", "options": ["Good", "Fair", "Poor"]},
                      {"name": "defects_noted", "type": "text"},
                      {"name": "solder_quality", "type": "select", "options": ["Excellent", "Good", "Acceptable", "Poor"]}
                    ],
                    "num_rows": 12
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "id": "thermal_cycling",
        "title": "Thermal Cycling",
        "icon": "üå°Ô∏è",
        "components": [
          {
            "type": "header",
            "content": "Thermal Cycling Test (-40¬∞C to +85¬∞C)",
            "level": 2
          },
          {
            "type": "metrics_row",
            "metrics": [
              {
                "label": "Cycles Completed",
                "value": "${thermal_cycles_completed}",
                "delta": null
              },
              {
                "label": "Last Checkpoint",
                "value": "${last_checkpoint_cycle}",
                "delta": null
              },
              {
                "label": "Next Checkpoint",
                "value": "${next_checkpoint_cycle}",
                "delta": null
              },
              {
                "label": "Est. Completion",
                "value": "${estimated_completion_date}",
                "delta": null
              }
            ]
          },
          {
            "type": "divider"
          },
          {
            "type": "tabs",
            "tabs": [
              {
                "id": "checkpoint_data",
                "label": "Checkpoint Measurements",
                "components": [
                  {
                    "type": "form",
                    "id": "checkpoint_form",
                    "fields": [
                      {
                        "name": "checkpoint_cycle",
                        "label": "Checkpoint Cycle Number",
                        "type": "select",
                        "required": true,
                        "options": ["50", "100", "200", "400", "600"]
                      }
                    ]
                  },
                  {
                    "type": "data_editor",
                    "id": "checkpoint_flash_test",
                    "title": "Flash Test Results",
                    "columns": [
                      {"name": "module_id", "type": "text"},
                      {"name": "pmax", "type": "number", "unit": "W"},
                      {"name": "voc", "type": "number", "unit": "V"},
                      {"name": "isc", "type": "number", "unit": "A"},
                      {"name": "fill_factor", "type": "number"},
                      {"name": "series_resistance", "type": "number", "unit": "Œ©"}
                    ]
                  },
                  {
                    "type": "file_uploader",
                    "label": "Upload Resistance Map",
                    "accept": [".csv"]
                  },
                  {
                    "type": "file_uploader",
                    "label": "Upload IR Images",
                    "accept": [".jpg", ".png"],
                    "multiple": true
                  }
                ]
              },
              {
                "id": "trending",
                "label": "Trending Analysis",
                "components": [
                  {
                    "type": "chart",
                    "chart_type": "line",
                    "data_source": "resistance_vs_cycles",
                    "x_axis": "cycles",
                    "y_axis": "resistance_increase_pct",
                    "title": "Resistance Increase vs Thermal Cycles",
                    "reference_lines": [
                      {"y": 10, "label": "200-cycle limit (10%)", "color": "orange", "style": "dashed"},
                      {"y": 20, "label": "600-cycle limit (20%)", "color": "red", "style": "dashed"}
                    ]
                  },
                  {
                    "type": "chart",
                    "chart_type": "line",
                    "data_source": "power_vs_cycles",
                    "x_axis": "cycles",
                    "y_axis": "power_pct",
                    "title": "Power Output vs Thermal Cycles",
                    "reference_lines": [
                      {"y": 98, "label": "200-cycle limit (2% loss)", "color": "orange", "style": "dashed"},
                      {"y": 95, "label": "600-cycle limit (5% loss)", "color": "red", "style": "dashed"}
                    ]
                  }
                ]
              },
              {
                "id": "checkpoint_summary",
                "label": "Checkpoint Summary",
                "components": [
                  {
                    "type": "data_table",
                    "data_source": "checkpoint_summary",
                    "title": "All Checkpoints Summary",
                    "columns": ["Checkpoint", "Power (W)", "Power Loss (%)", "Resistance (mŒ©)", "Resistance Increase (%)", "Hotspots"]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "id": "mechanical_testing",
        "title": "Mechanical Testing",
        "icon": "‚ö°",
        "components": [
          {
            "type": "header",
            "content": "Dynamic Mechanical Load Testing",
            "level": 2
          },
          {
            "type": "info_box",
            "style": "info",
            "content": "1000 Pa cyclic load at 0.5 Hz frequency"
          },
          {
            "type": "metrics_row",
            "metrics": [
              {
                "label": "Cycles Completed",
                "value": "${mech_cycles_completed}",
                "delta": null
              },
              {
                "label": "Load Amplitude",
                "value": "1000 Pa",
                "delta": null
              },
              {
                "label": "Test Duration",
                "value": "${test_duration_hours} hrs",
                "delta": null
              }
            ]
          },
          {
            "type": "divider"
          },
          {
            "type": "tabs",
            "tabs": [
              {
                "id": "dynamic_load",
                "label": "Dynamic Load",
                "components": [
                  {
                    "type": "data_editor",
                    "id": "mechanical_checkpoints",
                    "columns": [
                      {"name": "checkpoint_cycles", "type": "number"},
                      {"name": "pmax", "type": "number", "unit": "W"},
                      {"name": "power_loss_pct", "type": "number", "unit": "%"},
                      {"name": "visual_defects", "type": "text"}
                    ]
                  }
                ]
              },
              {
                "id": "static_load",
                "label": "Static Load",
                "components": [
                  {
                    "type": "info_box",
                    "style": "warning",
                    "content": "2400 Pa static load for 1 hour"
                  },
                  {
                    "type": "data_editor",
                    "id": "static_load_results",
                    "columns": [
                      {"name": "module_id", "type": "text"},
                      {"name": "pmax_before", "type": "number", "unit": "W"},
                      {"name": "pmax_after", "type": "number", "unit": "W"},
                      {"name": "power_change_pct", "type": "number", "unit": "%"},
                      {"name": "result", "type": "select", "options": ["PASS", "FAIL"]}
                    ]
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "id": "pull_test",
        "title": "Pull Test",
        "icon": "üîß",
        "components": [
          {
            "type": "header",
            "content": "Destructive Pull Test Analysis",
            "level": 2
          },
          {
            "type": "info_box",
            "style": "warning",
            "content": "Destructive testing - 30 solder joints per module, compare fresh vs aged samples"
          },
          {
            "type": "tabs",
            "tabs": [
              {
                "id": "fresh_samples",
                "label": "Fresh Samples",
                "components": [
                  {
                    "type": "data_editor",
                    "id": "pull_test_fresh",
                    "columns": [
                      {"name": "sample_id", "type": "text"},
                      {"name": "joint_id", "type": "text"},
                      {"name": "pull_force", "type": "number", "unit": "N"},
                      {"name": "failure_mode", "type": "select", "options": ["Solder failure", "Ribbon failure", "Cell crack", "Interface failure"]}
                    ],
                    "num_rows": 30
                  },
                  {
                    "type": "metric_cards",
                    "metrics": [
                      {
                        "label": "Mean Force",
                        "value": "${fresh_mean_force}",
                        "unit": "N",
                        "threshold": {"min": 30, "warning": 32}
                      },
                      {
                        "label": "Std Dev",
                        "value": "${fresh_std_dev}",
                        "unit": "N"
                      },
                      {
                        "label": "Min Force",
                        "value": "${fresh_min_force}",
                        "unit": "N"
                      }
                    ]
                  }
                ]
              },
              {
                "id": "aged_samples",
                "label": "Aged Samples",
                "components": [
                  {
                    "type": "data_editor",
                    "id": "pull_test_aged",
                    "columns": [
                      {"name": "sample_id", "type": "text"},
                      {"name": "joint_id", "type": "text"},
                      {"name": "pull_force", "type": "number", "unit": "N"},
                      {"name": "failure_mode", "type": "select", "options": ["Solder failure", "Ribbon failure", "Cell crack", "Interface failure"]}
                    ],
                    "num_rows": 30
                  },
                  {
                    "type": "metric_cards",
                    "metrics": [
                      {
                        "label": "Mean Force",
                        "value": "${aged_mean_force}",
                        "unit": "N",
                        "threshold": {"min": 24, "warning": 26}
                      },
                      {
                        "label": "Std Dev",
                        "value": "${aged_std_dev}",
                        "unit": "N"
                      },
                      {
                        "label": "Strength Loss",
                        "value": "${strength_loss_pct}",
                        "unit": "%",
                        "threshold": {"max": 20, "warning": 18}
                      }
                    ]
                  }
                ]
              },
              {
                "id": "comparison",
                "label": "Comparison",
                "components": [
                  {
                    "type": "chart",
                    "chart_type": "bar",
                    "data_source": "pull_test_comparison",
                    "x_axis": "sample_type",
                    "y_axis": "mean_force",
                    "title": "Pull Test Force: Fresh vs Aged",
                    "reference_lines": [
                      {"y": 30, "label": "Fresh minimum", "color": "green"},
                      {"y": 24, "label": "Aged minimum", "color": "red"}
                    ]
                  },
                  {
                    "type": "data_table",
                    "data_source": "pull_test_statistics",
                    "title": "Statistical Analysis"
                  }
                ]
              }
            ]
          }
        ]
      },
      {
        "id": "analysis",
        "title": "Analysis",
        "icon": "üìà",
        "components": [
          {
            "type": "header",
            "content": "Degradation Analysis & Lifetime Prediction",
            "level": 2
          },
          {
            "type": "metric_cards",
            "metrics": [
              {
                "label": "Predicted Lifetime",
                "value": "${predicted_lifetime}",
                "unit": "years",
                "threshold": {"min": 25, "warning": 27}
              },
              {
                "label": "R¬≤ (Resistance)",
                "value": "${r_squared_resistance}",
                "threshold": {"min": 0.85, "warning": 0.90}
              },
              {
                "label": "R¬≤ (Power)",
                "value": "${r_squared_power}",
                "threshold": {"min": 0.85, "warning": 0.90}
              },
              {
                "label": "Correlation (R vs P)",
                "value": "${correlation_r_p}",
                "threshold": {"min": 0.70, "warning": 0.80}
              }
            ]
          },
          {
            "type": "divider"
          },
          {
            "type": "chart",
            "chart_type": "line",
            "data_source": "lifetime_projection",
            "x_axis": "years",
            "y_axis": "reliability_pct",
            "title": "25-Year Reliability Projection (Weibull Model)",
            "reference_lines": [
              {"x": 25, "label": "Design Life", "color": "green", "style": "dashed"},
              {"y": 80, "label": "Target Reliability", "color": "orange", "style": "dashed"}
            ]
          },
          {
            "type": "chart",
            "chart_type": "scatter",
            "data_source": "correlation_data",
            "x_axis": "resistance_increase_pct",
            "y_axis": "power_loss_pct",
            "title": "Correlation: Resistance Increase vs Power Loss"
          },
          {
            "type": "divider"
          },
          {
            "type": "header",
            "content": "Failure Mode Analysis",
            "level": 3
          },
          {
            "type": "chart",
            "chart_type": "bar",
            "data_source": "failure_modes",
            "x_axis": "mode",
            "y_axis": "count",
            "title": "Failure Mode Distribution (Pareto Chart)"
          },
          {
            "type": "data_table",
            "data_source": "failure_mode_details",
            "title": "Detailed Failure Analysis"
          }
        ]
      },
      {
        "id": "report",
        "title": "Report",
        "icon": "üìÑ",
        "components": [
          {
            "type": "header",
            "content": "Test Report Generation",
            "level": 2
          },
          {
            "type": "info_box",
            "style": "success",
            "content": "Generate comprehensive test report with all measurements, analysis, and charts"
          },
          {
            "type": "metric_cards",
            "metrics": [
              {
                "label": "Overall Status",
                "value": "${overall_status}",
                "color_map": {"PASS": "green", "MARGINAL": "yellow", "FAIL": "red"}
              },
              {
                "label": "Critical Violations",
                "value": "${critical_violations}",
                "threshold": {"max": 0}
              },
              {
                "label": "Major Violations",
                "value": "${major_violations}",
                "threshold": {"max": 3, "warning": 2}
              },
              {
                "label": "Minor Violations",
                "value": "${minor_violations}"
              }
            ]
          },
          {
            "type": "divider"
          },
          {
            "type": "data_table",
            "data_source": "violation_details",
            "title": "Violations Summary"
          },
          {
            "type": "divider"
          },
          {
            "type": "button",
            "label": "Generate PDF Report",
            "action": "generate_report",
            "api_endpoint": "/api/solder-001/generate-report",
            "params": {"format": "pdf"}
          },
          {
            "type": "button",
            "label": "Export Data Package (Excel)",
            "action": "export_data",
            "api_endpoint": "/api/solder-001/export-data",
            "params": {"format": "xlsx"}
          },
          {
            "type": "button",
            "label": "Download Image Archive",
            "action": "download_images",
            "api_endpoint": "/api/solder-001/download-images",
            "params": {"format": "zip"}
          }
        ]
      }
    ],
    "api_endpoints": {
      "submit_initial_data": "/api/solder-001/initial-characterization",
      "submit_checkpoint": "/api/solder-001/checkpoint",
      "submit_pull_test": "/api/solder-001/pull-test",
      "calculate_analysis": "/api/solder-001/calculate",
      "generate_report": "/api/solder-001/generate-report",
      "export_data": "/api/solder-001/export-data",
      "download_images": "/api/solder-001/download-images",
      "get_trending_data": "/api/solder-001/trending"
    },
    "validation_rules": {
      "resistance_max_cell": 5.0,
      "resistance_max_busbar": 10.0,
      "power_loss_200_cycles": 2.0,
      "power_loss_600_cycles": 5.0,
      "resistance_increase_200_cycles": 10.0,
      "resistance_increase_600_cycles": 20.0,
      "pull_force_fresh_min": 30.0,
      "pull_force_aged_min": 24.0,
      "strength_degradation_max": 20.0
    }
  }
}
